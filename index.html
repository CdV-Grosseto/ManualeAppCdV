<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manuale Ufficiale C.d.V Grosseto</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        :root {
            --primary: #FCD34D;
            --primary-dark: #F59E0B;
            --dark: #1F2937;
            --light: #F3F4F6;
            --white: #ffffff;
            --text: #374151;
            --accent: #3B82F6;
            --success: #10B981;
            --danger: #EF4444;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Roboto, Helvetica, sans-serif; }
        
        body { 
            background-color: var(--light); 
            color: var(--text); 
            display: flex; 
            height: 100vh; 
            overflow: hidden;
        }

        /* --- SIDEBAR --- */
        aside {
            width: 280px;
            background: var(--dark);
            color: var(--white);
            display: flex;
            flex-direction: column;
            border-right: 1px solid #4b5563;
            flex-shrink: 0;
            transition: transform 0.3s ease;
            z-index: 100;
        }

        .sidebar-header {
            padding: 20px;
            background: var(--primary);
            color: var(--dark);
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .nav-links {
            overflow-y: auto;
            flex: 1;
            padding: 10px 0;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: #d1d5db;
            text-decoration: none;
            cursor: pointer;
            border-left: 4px solid transparent;
            transition: all 0.2s;
            font-size: 0.9rem;
        }

        .nav-item:hover { background: rgba(255,255,255,0.1); color: var(--white); }
        .nav-item.active { background: rgba(255,255,255,0.05); border-left-color: var(--primary); color: var(--primary); font-weight: 600; }
        .nav-item .material-icons { margin-right: 10px; font-size: 1.2rem; }
        
        /* Stile speciale per il pulsante app */
        .nav-item.app-link {
            background: rgba(252, 211, 77, 0.15);
            color: var(--primary);
            font-weight: bold;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 10px;
        }
        .nav-item.app-link:hover {
            background: var(--primary);
            color: var(--dark);
        }

        /* --- MAIN --- */
        main {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }

        /* SEARCH HEADER */
        header {
            background: var(--white);
            padding: 15px 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            gap: 20px;
            z-index: 10;
        }

        .search-container { flex: 1; position: relative; max-width: 600px; }
        .search-container input {
            width: 100%; padding: 12px 15px 12px 45px; border-radius: 8px;
            border: 1px solid #e5e7eb; font-size: 1rem; background: #f9fafb; transition: all 0.3s;
        }
        .search-container input:focus {
            outline: none; border-color: var(--primary); background: var(--white);
            box-shadow: 0 0 0 3px rgba(252, 211, 77, 0.2);
        }
        .search-icon { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #9ca3af; }

        /* CONTENT */
        .content-scroll { flex: 1; overflow-y: auto; padding: 30px; scroll-behavior: smooth; }

        .manual-section {
            background: var(--white); border-radius: 12px; padding: 30px; margin-bottom: 30px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1); border-top: 4px solid var(--primary);
            animation: fadeIn 0.3s ease-out;
        }
        .manual-section.hidden { display: none; }

        h2 { color: var(--dark); margin-bottom: 20px; display: flex; align-items: center; gap: 10px; font-size: 1.5rem; border-bottom: 2px solid #f3f4f6; padding-bottom: 10px; }
        h3 { color: var(--accent); margin: 25px 0 15px 0; font-size: 1.1rem; border-left: 3px solid var(--accent); padding-left: 10px; }
        p { line-height: 1.6; color: #4b5563; margin-bottom: 15px; }
        ul, ol { margin-left: 20px; margin-bottom: 15px; color: #4b5563; }
        li { margin-bottom: 8px; line-height: 1.5; }

        /* TABELLE */
        .table-responsive { overflow-x: auto; -webkit-overflow-scrolling: touch; } /* Scroll orizzontale su mobile */
        .example-table { width: 100%; border-collapse: collapse; margin: 15px 0; font-size: 0.9rem; min-width: 500px; /* Forza larghezza minima per leggibilit√† */ }
        .example-table th, .example-table td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }
        .example-table th { background: #f9fafb; font-weight: 600; color: var(--dark); }
        .example-table td.good { color: var(--success); font-weight: 500; }
        .example-table td.bad { color: var(--danger); text-decoration: line-through; color: #999; }

        /* BOX INFO */
        .info-box { padding: 15px; border-radius: 8px; margin: 15px 0; display: flex; gap: 15px; align-items: flex-start; }
        .info-box.tip { background: #eff6ff; border: 1px solid #bfdbfe; color: #1e40af; }
        .info-box.warning { background: #fef2f2; border: 1px solid #fecaca; color: #991b1b; }
        .info-box.tech { background: #f0fdf4; border: 1px solid #bbf7d0; color: #166534; }

        /* TAGS */
        .tag { display: inline-block; padding: 2px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: bold; margin: 0 2px; }
        .tag.sospetto { background: #fee2e2; color: #991b1b; }
        .tag.degrado { background: #dcfce7; color: #166534; }
        .tag.aiuto { background: #fce7f3; color: #9d174d; }

        /* ANIMAZIONE ATTENZIONE ICONA */
        @keyframes pulse-attention {
            0% { transform: scale(1); color: var(--primary-dark); filter: drop-shadow(0 0 0 rgba(0,0,0,0)); }
            50% { transform: scale(1.2); color: #ea580c; filter: drop-shadow(0 0 5px rgba(252, 211, 77, 0.6)); }
            100% { transform: scale(1); color: var(--primary-dark); filter: drop-shadow(0 0 0 rgba(0,0,0,0)); }
        }

        .attention-icon {
            animation: pulse-attention 2s infinite ease-in-out;
            display: inline-block;
            vertical-align: middle;
            margin-right: 5px;
        }

        .menu-toggle { display: none; background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--dark); }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        @media (max-width: 768px) {
            aside { position: fixed; left: -280px; height: 100%; box-shadow: 2px 0 10px rgba(0,0,0,0.2); }
            aside.open { transform: translateX(280px); }
            .menu-toggle { display: block; }
            header { padding: 15px; gap: 10px; }
            .content-scroll { padding: 15px; }
            .overlay { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 90; }
            .overlay.active { display: block; }
            
            /* Ottimizzazione Tabella Mobile */
            .example-table th, .example-table td { padding: 8px; font-size: 0.85rem; }
        }
    </style>
</head>
<body>

    <aside id="sidebar">
        <div class="sidebar-header">
            <span class="material-icons">menu_book</span>
            <span>Manuale C.d.V</span>
        </div>
        <nav class="nav-links">
            <!-- PULSANTE APPLICAZIONE -->
            <a href="https://cdv-grosseto.github.io/CdV-Grosseto/" class="nav-item app-link" target="_blank">
                <span class="material-icons">open_in_new</span> VAI ALL'APP C.d.V
            </a>
            
            <!-- MENU MANUALE -->
            <a href="#installazione" class="nav-item active" onclick="activateNav(this)">
                <span class="material-icons">download</span> Installazione App
            </a>
            <a href="#registrazione" class="nav-item" onclick="activateNav(this)">
                <span class="material-icons">person_add</span> Registrazione
            </a>
            <a href="#intro" class="nav-item" onclick="activateNav(this)">
                <span class="material-icons">info</span> Chi Siamo & Ruoli
            </a>
            <a href="#mappa" class="nav-item" onclick="activateNav(this)">
                <span class="material-icons">map</span> Mappa e Icone
            </a>
            <a href="#segnalazione" class="nav-item" onclick="activateNav(this)">
                <span class="material-icons">add_alert</span> Nuova Segnalazione
            </a>
            <a href="#ricerca" class="nav-item" onclick="activateNav(this)">
                <span class="material-icons">search</span> Ricerca Intelligente
            </a>
            <a href="#admin" class="nav-item" onclick="activateNav(this)">
                <span class="material-icons">admin_panel_settings</span> Area Coordinatori
            </a>
            <a href="#faq" class="nav-item" onclick="activateNav(this)">
                <span class="material-icons">help_outline</span> FAQ e Problemi
            </a>
        </nav>
        <div style="padding: 20px; font-size: 0.75rem; color: #9ca3af; text-align: center;">
            Versione 2.6<br>Aggiornato al 2025
        </div>
    </aside>

    <div class="overlay" id="overlay" onclick="toggleSidebar()"></div>

    <main>
        <header>
            <button class="menu-toggle" onclick="toggleSidebar()">
                <span class="material-icons">menu</span>
            </button>
            <div class="search-container">
                <span class="material-icons search-icon">search</span>
                <input type="text" id="searchInput" placeholder="Cerca nel manuale (es. 'registrazione', 'errore', 'internet')..." oninput="smartSearch()">
            </div>
        </header>

        <div class="content-scroll" id="contentArea">

            <!-- INSTALLAZIONE -->
            <section id="installazione" class="manual-section">
                <h2>
                    <a href="https://cdv-grosseto.github.io/CdV-Grosseto/" target="_blank" style="text-decoration:none;">
                        <span class="material-icons attention-icon" title="Clicca per aprire l'App">download</span>
                    </a> 
                    Installazione (Android & iOS)
                </h2>
                <p>Questa √® una <b>PWA (Progressive Web App)</b>. Non la troverai sugli store tradizionali, ma si installa direttamente dal browser per garantire aggiornamenti istantanei.</p>

                <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <div>
                        <h3>ü§ñ Android (Chrome)</h3>
                        <ol>
                            <li>Apri il link dell'app su <b>Chrome</b>.</li>
                            <li>Dovrebbe apparire un banner in alto "Installa App C.d.V". Cliccalo.</li>
                            <li>Se non appare, tocca i tre puntini in alto a destra ‚ãÆ</li>
                            <li>Seleziona <b>"Installa app"</b> o <b>"Aggiungi a schermata Home"</b>.</li>
                        </ol>
                    </div>
                    <div>
                        <h3>üçé iOS (iPhone/Safari)</h3>
                        <ol>
                            <li>Apri il link dell'app su <b>Safari</b>.</li>
                            <li>Tocca il tasto <b>Condividi</b> (quadrato con freccia in alto).</li>
                            <li>Scorri in basso e seleziona <b>"Aggiungi alla schermata Home"</b>.</li>
                            <li>Conferma cliccando su "Aggiungi".</li>
                        </ol>
                    </div>
                </div>
            </section>

            <!-- REGISTRAZIONE -->
            <section id="registrazione" class="manual-section">
                <h2><span class="material-icons" style="color:var(--primary-dark)">person_add</span> Registrazione e Primo Accesso</h2>
                <p>Per utilizzare l'applicazione √® necessario creare un account personale. Ecco come fare:</p>
                
                <ol>
                    <li>Apri l'applicazione.</li>
                    <li>Nella schermata di login, clicca sulla scritta in basso <b>"Non hai un account? Registrati"</b>.</li>
                    <li>Compila i campi richiesti:
                        <ul>
                            <li><b>Nome e Cognome:</b> Fondamentale per essere riconosciuti dal coordinatore del gruppo.</li>
                            <li><b>Email:</b> Usa un indirizzo valido.</li>
                            <li><b>Password:</b> Scegli una password di almeno 6 caratteri.</li>
                        </ul>
                    </li>
                    <li>Premi il tasto <b>Registrati</b>.</li>
                </ol>

                <div class="info-box warning">
                    <span class="material-icons">warning</span>
                    <div>
                        <strong>Attenzione: Assegnazione Gruppo</strong><br>
                        Dopo la registrazione, il tuo account sar√† attivo ma potresti non vedere ancora le segnalazioni del tuo quartiere. Questo √® normale: devi contattare il tuo <b>Coordinatore di Zona</b> affinch√© ti assegni al gruppo corretto (es. "Gruppo Via Roma").
                    </div>
                </div>
            </section>

            <!-- INTRODUZIONE E RUOLI -->
            <section id="intro" class="manual-section">
                <h2><span class="material-icons" style="color:var(--primary-dark)">info</span> Introduzione e Ruoli</h2>
                <p>L'app C.d.V Grosseto serve a coordinare le osservazioni dei cittadini per prevenire crimini e degrado. L'accesso √® strettamente personale.</p>
                
                <h3>Gerarchia Utenti</h3>
                <p>L'app mostra funzioni diverse in base al tuo ruolo:</p>
                <ul style="list-style: none; padding: 0;">
                    <li style="background:#f9fafb; padding:10px; border-left:4px solid #9ca3af; margin-bottom:10px;">
                        <b>üë§ Utente Base</b><br>
                        Pu√≤ inserire segnalazioni, vedere la mappa del proprio quartiere e usare la bacheca. Non pu√≤ cancellare segnalazioni altrui.
                    </li>
                    <li style="background:#fff7ed; padding:10px; border-left:4px solid #f97316; margin-bottom:10px;">
                        <b>üéñÔ∏è Coordinatore di Gruppo</b><br>
                        Gestisce il suo quartiere. Pu√≤ <b>Convalidare</b> le segnalazioni (confermarle), archiviarle e gestire gli utenti del suo gruppo.
                    </li>
                    <li style="background:#fef2f2; padding:10px; border-left:4px solid #ef4444;">
                        <b>üëë Coordinatore Generale (Super Admin)</b><br>
                        Vede tutti i gruppi, crea nuovi quartieri, genera Dossier PDF globali e ha controllo totale sul sistema.
                    </li>
                </ul>
            </section>

            <!-- MAPPA -->
            <section id="mappa" class="manual-section">
                <h2><span class="material-icons" style="color:var(--primary-dark)">map</span> Mappa e Simbologia</h2>
                <p>La mappa √® il cuore dell'app. Mostra in tempo reale ci√≤ che accade nel quartiere.</p>

                <h3>Legenda Colori</h3>
                <div class="example-table">
                    <div style="display:flex; align-items:center; gap:10px; margin-bottom:10px;">
                        <span class="material-icons" style="color:#ef4444">location_on</span>
                        <span><b>Rosso: Sospetto</b> (Furti, auto sospette, persone estranee)</span>
                    </div>
                    <div style="display:flex; align-items:center; gap:10px; margin-bottom:10px;">
                        <span class="material-icons" style="color:#10b981">location_on</span>
                        <span><b>Verde: Degrado</b> (Rifiuti, lampioni rotti, buche)</span>
                    </div>
                    <div style="display:flex; align-items:center; gap:10px; margin-bottom:10px;">
                        <span class="material-icons" style="color:#db2777">location_on</span>
                        <span><b>Rosa: Assistenza</b> (Persone in difficolt√†, animali smarriti)</span>
                    </div>
                    <div style="display:flex; align-items:center; gap:10px; margin-bottom:10px;">
                        <span class="material-icons" style="color:#374151">location_on</span>
                        <span><b>Grigio scuro: Archiviato</b> (Evento concluso/storico)</span>
                    </div>
                </div>

                <div class="info-box tech">
                    <span class="material-icons">hub</span>
                    <div>
                        <strong>Cosa sono i cerchi blu con i numeri?</strong><br>
                        Si chiamano "Cluster". Quando ci sono molte segnalazioni vicine, l'app le raggruppa per non intasare la mappa. Clicca sul cerchio blu per ingrandire e vedere le singole segnalazioni.
                    </div>
                </div>
            </section>

            <!-- SEGNALAZIONE -->
            <section id="segnalazione" class="manual-section">
                <h2><span class="material-icons" style="color:var(--primary-dark)">add_alert</span> Inviare una Segnalazione</h2>
                
                <h3>Procedura Corretta</h3>
                <ol>
                    <li>Premi il tasto <b>(+)</b> in basso a destra.</li>
                    <li><b>Tocca sulla mappa:</b> Non trascinare. Tocca semplicemente col dito il punto esatto dove √® avvenuto il fatto. Apparir√† un pin rosso temporaneo.</li>
                    <li>Se il punto √® giusto, premi il tasto nero <b>CONFERMA</b> che appare in basso.</li>
                    <li>Compila il modulo (Categoria e Descrizione).</li>
                </ol>

                <h3>Esempi di Descrizione</h3>
                <p>La qualit√† della segnalazione √® fondamentale. Rispetta la privacy.</p>
                
                <div class="table-responsive">
                    <table class="example-table">
                        <thead>
                            <tr>
                                <th>Categoria</th>
                                <th>‚úÖ COSA SCRIVERE (Efficace)</th>
                                <th>‚ùå DA EVITARE (Pericoloso/Inutile)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><b>Auto</b></td>
                                <td class="good">"Punto nero sospetto, targa inizia per DX e finisce per Z..."</td>
                                <td class="bad">"Targa DX123YZ, proprietario Mario Rossi"</td>
                            </tr>
                            <tr>
                                <td><b>Persone</b></td>
                                <td class="good">"Due ragazzi giovani con felpe scure, controllano le auto."</td>
                                <td class="bad">"Sono sicuramente ladri, arrestateli." (Nessuna descrizione fisica)</td>
                            </tr>
                            <tr>
                                <td><b>Luogo</b></td>
                                <td class="good">"All'incrocio con via Roma, vicino al bar."</td>
                                <td class="bad">"Qui davanti a casa mia." (Generico)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- RICERCA -->
            <section id="ricerca" class="manual-section">
                <h2><span class="material-icons" style="color:var(--primary-dark)">search</span> Ricerca Intelligente & Filtri</h2>
                <p>L'app utilizza un sistema di ricerca avanzato che comprende il linguaggio naturale e corregge i tuoi errori.</p>

                <h3>Sinonimi e Correzione Errori</h3>
                <div class="info-box tip">
                    <span class="material-icons">psychology</span>
                    <div>
                        <strong>Il sistema ti capisce:</strong><br>
                        <ul>
                            <li>Se cerchi <b>"Macchina"</b>, trover√† anche segnalazioni con scritto "Auto", "Veicolo", "Vettura", "SUV".</li>
                            <li>Se cerchi <b>"Ragazzi"</b>, trover√† anche "Giovani", "Adolescenti".</li>
                            <li>Se scrivi male, es. <b>"Maccina"</b> o <b>"Furgone"</b>, l'app corregger√† l'errore e trover√† comunque i risultati.</li>
                        </ul>
                    </div>
                </div>

                <h3>Filtri Temporali</h3>
                <p>Usa i pulsanti in alto sulla mappa per filtrare:</p>
                <ul>
                    <li><b>üìÖ Oggi:</b> Solo eventi delle ultime 24h.</li>
                    <li><b>üìÖ 7 Giorni:</b> Ultima settimana.</li>
                    <li><b>üìÖ Tutto:</b> Storico completo (escluso archivio).</li>
                </ul>
            </section>

            <!-- AREA ADMIN -->
            <section id="admin" class="manual-section">
                <h2><span class="material-icons" style="color:var(--primary-dark)">admin_panel_settings</span> Area Coordinatori e Admin</h2>
                
                <h3>1. Convalidare e Archiviare</h3>
                <p>Nella scheda mappa o bacheca, i coordinatori vedono pulsanti extra:</p>
                <ul>
                    <li><b>Convalida:</b> Conferma che la segnalazione √® attendibile. L'icona diventa pi√π scura.</li>
                    <li><b>Archivia:</b> Sposta la segnalazione nello storico "invisibile" per pulire la mappa.</li>
                </ul>

                <h3>2. Creare un Dossier PDF</h3>
                <p>Per inviare un report alle autorit√†:</p>
                <ol>
                    <li>Vai nella scheda <b>Bacheca</b>.</li>
                    <li>Clicca il tasto bianco rotondo (üìÑ) in basso a destra.</li>
                    <li>Appariranno delle caselle di spunta (checkbox) accanto a ogni segnalazione.</li>
                    <li>Seleziona le segnalazioni pertinenti (es. tutte quelle relative a un'auto rossa).</li>
                    <li>In alto apparir√† una barra blu: clicca su <b>Genera PDF</b>.</li>
                    <li>Dai un titolo (es. "Report Attivit√† Sospette Via Roma") e scarica il file.</li>
                </ol>

                <h3>3. Gestione Gruppi (Solo Super Admin)</h3>
                <p>Nella scheda <b>Gestione</b>, espandi la sezione "Gestione Gruppi".</p>
                <ul>
                    <li><b>Nuovo Gruppo:</b> Scrivi il nome, clicca "Imposta Centro", tocca sulla mappa il centro del quartiere e salva.</li>
                    <li><b>Modifica Posizione:</b> Clicca la matita ‚úèÔ∏è accanto al gruppo per spostare il centro geografico.</li>
                </ul>
            </section>

            <!-- FAQ -->
            <section id="faq" class="manual-section">
                <h2><span class="material-icons" style="color:var(--primary-dark)">help_outline</span> Risoluzione Problemi (FAQ)</h2>
                
                <div style="margin-bottom:20px">
                    <h4>‚úèÔ∏è Ho sbagliato a scrivere, come cancello?</h4>
                    <p>Gli utenti base <b>non possono cancellare</b> autonomamente le segnalazioni per motivi di sicurezza e tracciabilit√†. Devi contattare subito il tuo Coordinatore, che provveder√† a rimuoverla o modificarla per te.</p>
                </div>

                <div style="margin-bottom:20px">
                    <h4>üëÅÔ∏è Chi vede il mio nome?</h4>
                    <p>Il tuo nome e cognome sono visibili <b>solo ai membri del tuo gruppo</b> di controllo del vicinato. Questo serve a garantire che ogni segnalazione abbia una "faccia" e sia responsabile, scoraggiando falsi allarmi anonimi.</p>
                </div>

                <div style="margin-bottom:20px">
                    <h4>üì° L'app funziona senza Internet?</h4>
                    <p>Puoi aprire l'app e vedere la struttura anche senza internet, ma per inviare una segnalazione o ricevere gli aggiornamenti in tempo reale <b>√® necessaria una connessione dati (4G/5G/WiFi)</b> attiva.</p>
                </div>

                <div style="margin-bottom:20px">
                    <h4>üìç Il GPS non √® preciso</h4>
                    <p>L'app dipende dal GPS del telefono. Se sei al chiuso, potrebbe sbagliare di qualche metro. Usa il tasto <b>Mirino</b> sulla destra per ricalibrare, o sposta manualmente il punto toccando sulla mappa.</p>
                </div>

                <div style="margin-bottom:20px">
                    <h4>üìß Non ricordo la password</h4>
                    <p>Contatta un Admin. Per ora il reset password deve essere gestito manualmente o facendo logout e registrandosi con una nuova mail (l'Admin poi unir√† i dati se necessario).</p>
                </div>

                <div style="margin-bottom:20px">
                    <h4>üë• Vedo "Senza Gruppo"</h4>
                    <p>Sei registrato ma nessun coordinatore ti ha ancora assegnato al tuo quartiere. Finch√© non vieni assegnato, potrai vedere solo una mappa generica vuota o limitata.</p>
                </div>
            </section>

        </div>
    </main>

    <script>
        // --- LOGICA DI NAVIGAZIONE ---
        function activateNav(element) {
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            element.classList.add('active');
            
            // Su mobile chiudi sidebar dopo click
            if (window.innerWidth <= 768) toggleSidebar();
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('overlay');
            sidebar.classList.toggle('open');
            overlay.classList.toggle('active');
        }

        // --- RICERCA SEMANTICA NEL MANUALE ---
        // Mappa keyword -> ID Sezioni
        const searchMap = [
            { id: 'installazione', keywords: ['installare', 'scaricare', 'iphone', 'android', 'ios', 'app', 'icona', 'home'] },
            { id: 'registrazione', keywords: ['iscriversi', 'account', 'login', 'accedere', 'password', 'email', 'nome', 'primo accesso'] },
            { id: 'intro', keywords: ['ruoli', 'chi siamo', 'privacy', 'gerarchia', 'utente', 'coordinatore', 'admin'] },
            { id: 'mappa', keywords: ['rosso', 'verde', 'rosa', 'colori', 'simboli', 'cluster', 'cerchi', 'numeri'] },
            { id: 'segnalazione', keywords: ['scrivere', 'inviare', 'nuova', 'targa', 'descrizione', 'esempio', 'errore'] },
            { id: 'ricerca', keywords: ['filtri', 'oggi', 'tempo', 'sinonimi', 'cerca', 'trova', 'google'] },
            { id: 'admin', keywords: ['pdf', 'dossier', 'stampa', 'convalida', 'archivia', 'gruppo', 'quartiere', 'creare'] },
            { id: 'faq', keywords: ['problema', 'gps', 'password', 'non va', 'errore', 'bug', 'internet', 'cancellare', 'modificare', 'nome', 'privacy'] }
        ];

        function smartSearch() {
            const query = document.getElementById('searchInput').value.toLowerCase().trim();
            const sections = document.querySelectorAll('.manual-section');

            if (!query) {
                sections.forEach(s => s.classList.remove('hidden'));
                return;
            }

            sections.forEach(sec => {
                const sectionId = sec.id;
                // Cerca nel testo visibile
                const sectionText = sec.innerText.toLowerCase();
                let match = sectionText.includes(query);

                // Cerca nelle keyword nascoste (Semantica)
                const mapEntry = searchMap.find(m => m.id === sectionId);
                if (mapEntry) {
                    const keywordMatch = mapEntry.keywords.some(k => k.includes(query));
                    if (keywordMatch) match = true;
                }

                if (match) sec.classList.remove('hidden');
                else sec.classList.add('hidden');
            });
        }
    </script>
</body>
</html>
